## 日报

#### 今日工作

今天工作主要完成素材库升级V1.1版本的联调工作,上午大概用了30分钟搭建联调环境,然后在线上测试了下项目,发现昨天晚上走之前改的一个需求,在选择渠道选择列表中添加一个"未选择"的选项，初始化渠道选择的时候把未选择设为默认,然后增加的逻辑是在'未选择'下提交的所有验证所带的`channel`字段都设为`default`, 昨晚完成这个需求引出了新的bug,切换渠道之后js直接报错.
之后联调的时候发现自己的逻辑有些问题:

数据验证情况:
1. 只是针对文本的验证,在图片下也会调用;
2. 还没验证完成,数据就已经开始提交;

针对上传的文本情况:
1. 图片上传没能在参数已经改变的情况下及时修改自己的option
2. 上传文本没有指定上传的参数,使用默认参数(简单的发现修复)

接口方面:
1. 后端接口在不同条件下要传不同类型的参数(这个需要和后端好好沟通一下)
2. 接口字段有些对不上

到此为止,联调过程中发现的问题解决完毕,接下来是对之前修复的bug逻辑不变的情况下进行了一下优化,完成后还没有发现问题


#### 遇到问题

1. 上传插件定制化问题：api中有一个`setOption`的方法可以粗暴的设置所有的参数，但是`plupupload`API看起来还是太复杂，而且命名不符合规范，以后项目中选用`webuploader`比较好；
2. 验证逻辑太集中，感觉比较好的方式是把函数拆分出来，每个函数就做一件事；
3. 过多的ajax异步: 在项目中过度引入$.when();
